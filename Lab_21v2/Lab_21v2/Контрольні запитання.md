Контрольні запитання (короткі відповіді)

1. Коли та з якою метою доцільно використовувати файли в програмуванні?

Файли потрібні, коли:

дані треба зберегти між запусками програми (постійна пам’ять);

обсяг даних занадто великий для оперативної пам’яті;

потрібно обмінюватися даними між різними програмами / системами;

треба вести логи, протоколи, звіти.

2. Які типи файлів і потоків використовуються в C#?

У C# основні види:

Текстові файли

Робота через StreamReader, StreamWriter, File, FileInfo.

Плюси: людина може прочитати, зручно для логів, простих конфігів.

Мінуси: більший розмір, повільніше, треба парсити строки.

Бінарні файли

Робота через BinaryReader, BinaryWriter, FileStream.

Плюси: менший розмір, швидке читання/запис, зручно для структурованих даних.

Мінуси: людина не читає «очима», формат треба чітко знати.

Потоки (streams):

FileStream – низькорівневий потік для роботи з файлом;

над ним будуються StreamReader/StreamWriter (текст) і BinaryReader/BinaryWriter (бінарні).

3. Що відбувається на рівні операційної системи при відкритті файла?

При відкритті файлу:

ОС шукає файл у файловій системі за шляхом;

перевіряє права доступу (читання/запис);

створює дескриптор (handle) – внутрішній ідентифікатор відкритого файлу;

виділяє буфер, встановлює поточну позицію в файлі (зазвичай на початок або кінець, залежно від режиму);

повертає програмі об’єкт потоку, прив’язаний до цього дескриптора.

4. Як створити текстовий файл?

Найпростіші варіанти:

using System.IO;

// Варіант 1 – одразу записати строку
File.WriteAllText("data.txt", "Hello");

// Варіант 2 – через StreamWriter
using (StreamWriter sw = new StreamWriter("data.txt"))
{
    sw.WriteLine("Перша стрічка");
}


Якщо файла не було – він буде створений.

5. Як здійснюється зчитування даних з текстового файла?

Через StreamReader або статичні методи класу File:

using (StreamReader sr = new StreamReader("data.txt"))
{
    string line;
    while ((line = sr.ReadLine()) != null)
    {
        // Обробка рядка
    }
}


Або:

string[] lines = File.ReadAllLines("data.txt");


6. Як здійснюється перевірка кінця текстового файла і коли вона застосовується?

Кінець файла:

або коли ReadLine() повернув null;

або коли sr.EndOfStream == true.

Приклад:

while (!sr.EndOfStream)
{
    string line = sr.ReadLine();
    // ...
}


Застосовується в циклі читання записів, коли невідома кількість рядків у файлі.

7. Як закрити файл? Що відбувається при цьому в ОС?

У C# зазвичай використовують using – він сам викликає Close() / Dispose():

using (StreamWriter sw = new StreamWriter("data.txt"))
{
    sw.WriteLine("...");
} // тут файл автоматично закривається


На рівні ОС:

буфер дозаписується на диск;

дескриптор файлу звільняється;

інші процеси можуть повноцінно працювати з файлом.