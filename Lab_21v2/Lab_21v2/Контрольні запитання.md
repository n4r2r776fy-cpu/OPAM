
---

# **Контрольні запитання — Лабораторна робота №21**

### *Тема: Текстові файли та потоки*

---

## **1. Коли та з якою метою доцільно використовувати файли в програмуванні?**

Файли використовують, коли дані потрібно **зберегти на постійній основі**, тобто між запусками програми.
Основні цілі:

* збереження результатів роботи програми;
* обмін даними між різними програмами;
* робота з великими масивами даних, що не поміщаються в оперативну пам’ять;
* створення логів та протоколів;
* збереження налаштувань, конфігурацій, статистики тощо.

---

## **2. Які типи файлів і потоків використовуються в C#? У чому переваги та недоліки кожного?**

У C# використовуються два основних типи файлів:

### **1) Текстові файли**

* читаються та записуються через `StreamReader`, `StreamWriter`, `File`.
* **Переваги:**

  * людина може читати вміст;
  * простий формат;
  * зручно для логів, налаштувань, невеликих таблиць.
* **Недоліки:**

  * повільніші за бінарні;
  * займають більше місця;
  * треба самостійно парсити рядки.

### **2) Бінарні файли**

* робота через `BinaryReader`, `BinaryWriter`, `FileStream`.
* **Переваги:**

  * висока швидкість роботи;
  * компактний формат;
  * підходять для структурованих даних.
* **Недоліки:**

  * нечитабельні для людини;
  * потребують точного знання структури запису.

### **Потоки в C#:**

* `FileStream` — базовий потік для файлів;
* `StreamReader` / `StreamWriter` — для текстових файлів;
* `BinaryReader` / `BinaryWriter` — для бінарних даних.

---

## **3. Що відбувається на рівні операційної системи при відкритті файла?**

При відкритті файлу ОС:

* перевіряє існування файлу та права доступу;
* знаходить файл у файловій системі;
* створює **дескриптор файла** (handle);
* відкриває потік і визначає режим (читання, запис, додавання);
* виділяє буфер введення/виведення;
* встановлює поточну позицію в файлі (зазвичай на початок).

---

## **4. Як створити текстовий файл?**

У C# файл створюється автоматично під час запису:

```csharp
using (StreamWriter sw = new StreamWriter("data.txt"))
{
    sw.WriteLine("Hello");
}
```

або так:

```csharp
File.WriteAllText("data.txt", "Text...");
```

Якщо файла не існує — він буде створений.

---

## **5. Як здійснюється зчитування даних з текстового файла?**

Основний спосіб:

```csharp
using (StreamReader sr = new StreamReader("data.txt"))
{
    string line;
    while ((line = sr.ReadLine()) != null)
    {
        // обробка рядка
    }
}
```

Або:

```csharp
string[] lines = File.ReadAllLines("data.txt");
```

---

## **6. Як здійснюється перевірка кінця текстового файла і коли вона застосовується?**

Способи:

* Метод `ReadLine()` повертає `null` — це кінець файла.
* Властивість `sr.EndOfStream == true`.

Застосовується тоді, коли кількість рядків у файлі **заздалегідь невідома**, і необхідно читати до кінця.

---

## **7. Як закрити файл? Що відбувається на рівні операційної системи при закритті файла?**

Файл закривається автоматично при використанні конструкції `using`:

```csharp
using (StreamWriter sw = new StreamWriter("data.txt"))
{
    sw.WriteLine("Test");
} // тут файл закривається
```

Або вручну:

```csharp
sw.Close();
```

При закритті файла ОС:

* записує всі дані з буфера на диск;
* звільняє дескриптор файла;
* знімає блокування файлу;
* інші програми можуть отримати доступ до файлу.

---


